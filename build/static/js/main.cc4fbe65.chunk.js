(this["webpackJsonpsolana-frontend-quickstart"]=this["webpackJsonpsolana-frontend-quickstart"]||[]).push([[0],{127:function(e){e.exports=JSON.parse('{"name":"solana-frontend-quickstart","version":"0.1.3","private":true,"homepage":".","scripts":{"tailwind":"npx tailwindcss -i ./src/input.css -o ./src/output.css","tw":"npx tailwindcss -i ./src/input.css -o ./src/output.css --watch","start":"npm run tailwind && react-app-rewired --openssl-legacy-provider start","dev":"concurrently \\"npm run start\\" \\"npm run tw\\"","build":"npm run tailwind && react-app-rewired --openssl-legacy-provider build","fleekbuild":"npm run tailwind && react-app-rewired build","serve":"react-app-rewired build && node serve.js","test":"react-app-rewired test","eject":"react-app-rewired eject"},"dependencies":{"@solana/spl-token":"^0.3.11","@solana/wallet-adapter-base":"^0.6.0","@solana/wallet-adapter-react":"^0.12.2","@solana/wallet-adapter-react-ui":"^0.4.2","@solana/wallet-adapter-wallets":"^0.10.0","@solana/web3.js":"^1.89.1","@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","@types/jest":"^26.0.15","@types/node":"^12.0.0","@types/react":"^17.0.0","@types/react-dom":"^17.0.0","@types/react-router-dom":"^5.1.8","autoprefixer":"^10.4.17","bn.js":"^5.2.1","borsh":"^0.6.0","buffer-layout":"^1.2.2","express":"^4.18.2","react":"^17.0.2","react-app-rewired":"^2.2.1","react-dom":"^17.0.2","react-scripts":"4.0.3","tailwindcss":"^0.0.0-insiders.0ec6678","typescript":"^4.1.2","web-vitals":"^1.0.1"},"resolutions":{"@types/react":"17.0.2","@types/react-dom":"17.0.2"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":[">0.2%","not dead","not op_mini all"],"devDependencies":{"@babel/plugin-proposal-private-property-in-object":"^7.21.11","concurrently":"^8.2.2"}}')},209:function(e,t,c){"use strict";(function(e){c.d(t,"a",(function(){return a}));var n=c(16),s=c(30);let r=function(e){return e[e.Uninitialized=0]="Uninitialized",e[e.Initialized=1]="Initialized",e[e.Frozen=2]="Frozen",e}({});async function a(t,c,a){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.c;const i=await t.getAccountInfo(c,a);if(!i)throw new Error("TokenAccountNotFoundError");if(!i.owner.equals(o))throw new Error("TokenInvalidAccountOwnerError");if(i.data.length!==s.b.span)throw new Error("TokenInvalidAccountSizeError");const l=s.b.decode(e.from(i.data));return{address:c,mint:l.mint,owner:l.owner,amount:l.amount,delegate:l.delegateOption?l.delegate:null,delegatedAmount:l.delegatedAmount,isInitialized:l.state!==r.Uninitialized,isFrozen:l.state===r.Frozen,isNative:!!l.isNativeOption,rentExemptReserve:l.isNativeOption?l.isNative:null,closeAuthority:l.closeAuthorityOption?l.closeAuthority:null}}}).call(this,c(4).Buffer)},220:function(e,t,c){},221:function(e,t,c){},225:function(e,t){},276:function(e,t){},278:function(e,t){},292:function(e,t){},295:function(e,t){},296:function(e,t){},316:function(e,t){},318:function(e,t){},328:function(e,t){},330:function(e,t){},357:function(e,t){},359:function(e,t){},364:function(e,t){},366:function(e,t){},373:function(e,t){},385:function(e,t){},388:function(e,t){},399:function(e,t){},400:function(e,t,c){"use strict";c.r(t);var n=c(3),s=c.n(n),r=c(88),a=c.n(r),o=(c(220),c(221),c.p+"static/media/logo.b1c195ff.svg"),i=c(5);function l(e){let{title:t,value:c,onChangeHandler:n}=e;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("label",{htmlFor:"large-input",className:"block mb-2 text-sm font-medium  text-gray-900 dark:text-white",children:t}),Object(i.jsx)("input",{value:c,onChange:e=>n(e.target.value),type:"text",id:"large-input",className:"bg-gray-50 border border-gray-300  text-gray-900 text-sm rounded-lg focus:ring-blue-500  focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700  dark:border-gray-600 dark:placeholder-gray-400  dark:text-white dark:focus:ring-blue-500  dark:focus:border-blue-500"})]})}function d(e){let{text:t,onClickHandler:c,disabled:n}=e;return Object(i.jsx)("button",{onClick:n?()=>{}:c,type:"button",className:"".concat("focus:outline-none text-white \n    bg-mainPurple \n    font-medium rounded-lg \n    text-sm px-5 py-3 mb-2\n    rounded-lg\n    hover:ring-4\n    focus:ring-4\n    \n    focus:ring-gray-400 \n      hover:ring-gray-600\n      dark:hover:ring-gray-600\n      "," ").concat(n&&"bg-gray-400"),children:t})}var u=c(14),b=c(44);var j=()=>Object(i.jsx)("div",{className:"",children:Object(i.jsx)("span",{className:"",children:Object(i.jsx)(b.b,{children:Object(i.jsx)(b.c,{})})})});var p=function(e){let{setMsg:t,setErrMsg:c}=e;const[s,r]=Object(n.useState)(""),[a,o]=Object(n.useState)("2"),{publicKey:p}=Object(u.d)(),x=Object(n.useCallback)((async()=>{try{if(!p)return c("Please connect your wallet to continue");if(!a)return c("Escrow amount is required!!");const e="https://oxescrow.api.oxquantumprojects.lol/create_escrow?initializerPublicKey=".concat(p,"&amount=").concat(a),n=await fetch(e).then((e=>e.json()));n.isSuccess?(r(n.data.escrowAcc),t(n.message)):c(n.message)}catch(e){console.log(e)}}),[a,p,r,c,t]);return Object(i.jsxs)("div",{className:"max-w-sm mx-auto",children:[Object(i.jsx)("h1",{className:"text-blue-500 text-[15px] mb-5",children:"Enter the expected Usdc amount. Our API will generate a unique address for escrow. Share this address with the sender to receive the escrowed funds securely."}),Object(i.jsx)("div",{className:"mb-5",children:Object(i.jsx)(l,{onChangeHandler:r,value:s,title:"Deposit address"})}),Object(i.jsx)("div",{className:"mb-5",children:Object(i.jsx)(l,{onChangeHandler:o,value:a,title:"Amount to receive"})}),!p&&Object(i.jsxs)("div",{className:"justify-center flex mt-5",children:[Object(i.jsx)(j,{})," ",Object(i.jsx)("br",{})]}),p&&Object(i.jsxs)("div",{className:"justify-center flex flex-col mt-7",children:[Object(i.jsx)("div",{children:Object(i.jsx)(d,{text:"Generate Escrow Account",disabled:!p,onClickHandler:x})}),Object(i.jsx)("br",{}),Object(i.jsx)("div",{children:Object(i.jsx)(b.a,{})})]})]})};function x(e){let{showHistory:t}=e;const{publicKey:c}=Object(u.d)(),[s,r]=Object(n.useState)([]),a=Object(n.useCallback)((async()=>{try{if(!c)return;const e="https://oxescrow.api.oxquantumprojects.lol/getescrows?publicKey=",t=await fetch(e+c).then((e=>e.json()));r(t.map((e=>({pubkey:e.temp_token_account_pubkey,amount:e.escrow_amount,status:e.completed?"Paid":"Pending"}))))}catch(e){console.log(e)}}),[c]);return Object(n.useEffect)((()=>{const e=setInterval((()=>{console.log("refreshing..."),a()}),6e3);return()=>clearInterval(e)}),[a]),Object(i.jsx)("div",{className:"relative overflow-x-auto",children:Object(i.jsxs)("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:[Object(i.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"col",className:"px-6 py-3",children:"PublicKey"}),Object(i.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Amount"}),Object(i.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Status"})]})}),Object(i.jsxs)("tbody",{children:[t&&s.map((e=>Object(i.jsxs)("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[Object(i.jsx)("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:e.pubkey}),Object(i.jsx)("td",{className:"px-6 py-4",children:e.amount}),Object(i.jsx)("td",{className:"px-6 py-4",children:e.status})]},e.pubkey))),!t&&Object(i.jsx)("tr",{children:Object(i.jsx)("td",{className:"text-md p-4",children:"History turned off"})})]})]})})}var h=c(2),m=c(6);const f={localhost:void 0,usdcMintPubKey:new m.d("DK6BeYfBvcb7epFnDiEXvqZKVbiPjiV692h7oWoB5P5L"),escrowProgramId:new m.d("EQ241DM743htRoAQ1WS8S8QDL1g4dKkndCLuUQ552zgS")};var g=c(16),O=c(209);async function w(e,t,c){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:g.c,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:g.a;const o=await async function(e,t){let c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g.c,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:g.a;if(!c&&!m.d.isOnCurve(t.toBuffer()))throw new Error("TokenOwnerOffCurveError");const[r]=await m.d.findProgramAddress([t.toBuffer(),n.toBuffer(),e.toBuffer()],s);return r}(t,c,n,r,a);try{return await Object(O.a)(e,o,s,r)}catch(i){return}}var y=c(127);const v=e=>{const t=e.length>=5?5:2,c=e.slice(0,t),n=e.slice(-t);return"".concat(c,"***").concat(n)};var k=function(){const{publicKey:e}=Object(u.d)(),{balance:t,tokenBalance:c}=(()=>{const[e,t]=Object(n.useState)(0),[c,s]=Object(n.useState)(0),{connection:r}=Object(u.c)(),{publicKey:a,signTransaction:o}=Object(u.d)(),i=Object(n.useCallback)((async()=>{try{if(!a||!o)throw new h.k;const e=await r.getBalance(a);t(e/m.c);const c=await w(r,f.usdcMintPubKey,a);null!==c&&void 0!==c&&c.amount&&s(Number(null===c||void 0===c?void 0:c.amount.toString()))}catch(e){console.log(e)}}),[r,a,o]);return Object(n.useEffect)((()=>{const e=setInterval((()=>{console.log("refreshing..."),i()}),6e3);return()=>clearInterval(e)}),[i]),{balance:e,tokenBalance:c}})(),[s,r]=Object(n.useState)(""),[a,l]=Object(n.useState)(!1),[b,j]=Object(n.useState)("");return Object(n.useEffect)((()=>{localStorage.getItem("version")!==y.version&&("caches"in window&&(caches.keys().then((e=>{e.forEach((e=>{caches.delete(e)}))})),window.location.reload()),localStorage.clear(),localStorage.setItem("version",y.version))}),[]),Object(i.jsx)("div",{className:"App",children:Object(i.jsxs)("header",{className:"App-header",children:[Object(i.jsx)("img",{src:o,className:"App-logo mx-auto",alt:"logo"}),Object(i.jsx)("h3",{className:"font-semibold text-center",children:"Oxescrow"}),e&&Object(i.jsx)("h3",{className:"text-white text-center",children:Object(i.jsxs)("div",{className:"text-[20px] mt-[10px]",children:[Object(i.jsx)("p",{children:" Connected wallet "}),Object(i.jsx)("p",{className:"text-blue-400 font-semibold text-[17px]",children:v(e.toString())})]})}),Object(i.jsx)("div",{className:"flex justify-center mt-2 flex-col items-center",children:Object(i.jsx)("div",{className:"md:w-[50%] mb-8",children:Object(i.jsxs)("div",{className:"max-w-sm mx-auto",children:[s&&Object(i.jsx)("p",{className:"text-red-500 text-sm",children:s}),b&&Object(i.jsx)("p",{className:"text-green-500 text-sm",children:b})]})})}),Object(i.jsxs)("div",{className:"flex justify-center mt-2 flex-col items-center",children:[Object(i.jsx)("div",{className:"md:w-[50%] mb-20",children:Object(i.jsx)(p,{setErrMsg:r,setMsg:j})}),Object(i.jsxs)("div",{className:"w-[94%] md:w-[50%] mb-20",children:[Object(i.jsxs)("div",{className:"flex mb-4",children:[Object(i.jsx)(d,{onClickHandler:()=>l(!a),disabled:!!e,text:"Show history >>"}),Object(i.jsxs)("div",{className:"text-[17px] ml-8 text-blue-500",children:[Object(i.jsxs)("p",{children:[" Sol Balance: ",t.toFixed(2)," "]}),Object(i.jsxs)("p",{children:[" Usdc Balance: ",c.toFixed(2)," "]})]})]}),Object(i.jsx)(x,{showHistory:a})]})]})]})})},N=c(45);var S=function(e){let{children:t}=e;const c=h.e.Mainnet,n=s.a.useMemo((()=>Object(m.e)(c)),[c]);console.log(n);const r=s.a.useMemo((()=>[Object(N.a)(),Object(N.b)(),Object(N.c)(),Object(N.d)(),Object(N.f)({network:c}),Object(N.e)({network:c})]),[c]);return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(u.a,{endpoint:n,children:Object(i.jsx)(u.b,{wallets:r,children:Object(i.jsx)(b.b,{children:t})})})})};a.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(S,{children:Object(i.jsx)(k,{})})}),document.getElementById("root"))}},[[400,1,2]]]);
//# sourceMappingURL=main.cc4fbe65.chunk.js.map