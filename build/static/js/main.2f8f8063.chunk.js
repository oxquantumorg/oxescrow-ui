(this["webpackJsonpsolana-frontend-quickstart"]=this["webpackJsonpsolana-frontend-quickstart"]||[]).push([[0],{125:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var a=n(16),r=n(30);let c=function(e){return e[e.Uninitialized=0]="Uninitialized",e[e.Initialized=1]="Initialized",e[e.Frozen=2]="Frozen",e}({});async function s(t,n,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.c;const o=await t.getAccountInfo(n,s);if(!o)throw new Error("TokenAccountNotFoundError");if(!o.owner.equals(i))throw new Error("TokenInvalidAccountOwnerError");if(o.data.length!==r.b.span)throw new Error("TokenInvalidAccountSizeError");const l=r.b.decode(e.from(o.data));return{address:n,mint:l.mint,owner:l.owner,amount:l.amount,delegate:l.delegateOption?l.delegate:null,delegatedAmount:l.delegatedAmount,isInitialized:l.state!==c.Uninitialized,isFrozen:l.state===c.Frozen,isNative:!!l.isNativeOption,rentExemptReserve:l.isNativeOption?l.isNative:null,closeAuthority:l.closeAuthorityOption?l.closeAuthority:null}}}).call(this,n(4).Buffer)},128:function(e){e.exports=JSON.parse('{"name":"solana-frontend-quickstart","version":"0.1.2","private":true,"scripts":{"tailwind":"npx tailwindcss -i ./src/input.css -o ./src/output.css","tw":"npx tailwindcss -i ./src/input.css -o ./src/output.css --watch","start":"npm run tailwind && react-app-rewired --openssl-legacy-provider start","build":"npm run tailwind && react-app-rewired --openssl-legacy-provider build","serve":"react-app-rewired build && node serve.js","test":"react-app-rewired test","eject":"react-app-rewired eject"},"dependencies":{"@solana/spl-token":"^0.3.11","@solana/wallet-adapter-base":"^0.6.0","@solana/wallet-adapter-react":"^0.12.2","@solana/wallet-adapter-react-ui":"^0.4.2","@solana/wallet-adapter-wallets":"^0.10.0","@solana/web3.js":"^1.89.1","@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","@types/jest":"^26.0.15","@types/node":"^12.0.0","@types/react":"^17.0.0","@types/react-dom":"^17.0.0","@types/react-router-dom":"^5.1.8","autoprefixer":"^10.4.17","bn.js":"^5.2.1","borsh":"^0.6.0","buffer-layout":"^1.2.2","express":"^4.18.2","react":"^17.0.2","react-app-rewired":"^2.2.1","react-dom":"^17.0.2","react-scripts":"4.0.3","tailwindcss":"^0.0.0-insiders.0ec6678","typescript":"^4.1.2","web-vitals":"^1.0.1"},"resolutions":{"@types/react":"17.0.2","@types/react-dom":"17.0.2"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":[">0.2%","not dead","not op_mini all"],"devDependencies":{"@babel/plugin-proposal-private-property-in-object":"^7.21.11"}}')},210:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var a=n(16),r=n(5);function c(t,n,c,s){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.c,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:a.a;const l=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:r.f.programId,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:r.e,isSigner:!1,isWritable:!1}];return new r.h({keys:l,programId:o,data:e.alloc(0)})}}).call(this,n(4).Buffer)},221:function(e,t,n){},222:function(e,t,n){},225:function(e,t){},277:function(e,t){},279:function(e,t){},293:function(e,t){},296:function(e,t){},297:function(e,t){},317:function(e,t){},319:function(e,t){},329:function(e,t){},331:function(e,t){},358:function(e,t){},360:function(e,t){},365:function(e,t){},367:function(e,t){},374:function(e,t){},386:function(e,t){},389:function(e,t){},400:function(e,t){},401:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),c=n(87),s=n.n(c),i=(n(221),n(222),n.p+"static/media/logo.317aa4d3.svg"),o=n(131),l=n(6);var d=()=>Object(l.jsx)("div",{className:"",children:Object(l.jsx)("span",{className:"",children:Object(l.jsx)(o.a,{children:Object(l.jsx)(o.b,{})})})});function u(e){let{title:t,value:n,onChangeHandler:a}=e;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("label",{htmlFor:"large-input",className:"block mb-2 text-sm font-medium  text-gray-900 dark:text-white",children:t}),Object(l.jsx)("input",{value:n,onChange:e=>a(e.target.value),type:"text",id:"large-input",className:"bg-gray-50 border border-gray-300  text-gray-900 text-sm rounded-lg focus:ring-blue-500  focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700  dark:border-gray-600 dark:placeholder-gray-400  dark:text-white dark:focus:ring-blue-500  dark:focus:border-blue-500"})]})}function b(e){let{text:t,onClickHandler:n,disabled:a}=e;return Object(l.jsx)("button",{onClick:a?()=>{}:n,type:"button",className:"".concat("focus:outline-none text-white \n    bg-mainPurple \n    font-medium rounded-lg \n    text-sm px-5 py-2.5 mb-2\n    \n    hover:ring-4\n    focus:ring-4\n    \n    focus:ring-gray-400 \n      hover:ring-gray-600\n      dark:hover:ring-gray-600\n      "," ").concat(a&&"bg-gray-400"),children:t})}var j=n(14);var p=function(e){let{setMsg:t,setDisplayPubKey:n,setErrMsg:r}=e;const[c,s]=Object(a.useState)(""),[i,o]=Object(a.useState)("2"),{publicKey:d}=Object(j.d)(),p=Object(a.useCallback)((async()=>{try{if(!c||!i)return r("Receiver Public Key and amount is required!!");const e="https://oxescrow.api.oxquantumprojects.lol/create_escrow?receiverPubKey=".concat(c,"&amount=").concat(i),a=await fetch(e).then((e=>e.json()));console.log("res",a),a.isSuccess?(n(a.data.escrowAcc),t(a.message)):r(a.message)}catch(e){console.log(e)}}),[c,i,n,r,t]);return Object(a.useEffect)((()=>{null!=d&&s(d.toString())}),[d]),Object(l.jsxs)("form",{className:"max-w-sm mx-auto",children:[Object(l.jsx)("div",{className:"mb-5",children:Object(l.jsx)(u,{onChangeHandler:s,value:c,title:"Preferred receiving public key"})}),Object(l.jsx)("div",{className:"mb-5",children:Object(l.jsx)(u,{onChangeHandler:o,value:i,title:"Amount to receive"})}),Object(l.jsx)(b,{text:"Send transaction",disabled:!d,onClickHandler:p})]})};var h=()=>{const{publicKey:e}=Object(j.d)(),[t,n]=Object(a.useState)([]),r=Object(a.useCallback)((async()=>{try{if(!e)return;const t="https://oxescrow.api.oxquantumprojects.lol/getescrows?publicKey=",a=await fetch(t+e).then((e=>e.json()));n(a.map((e=>({pubkey:e.temp_token_account_pubkey,amount:e.escrow_amount,status:e.completed?"Paid":"Pending"}))))}catch(t){console.log(t)}}),[e]);return Object(a.useEffect)((()=>{r()}),[r]),Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:"relative overflow-x-auto",children:Object(l.jsxs)("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:[Object(l.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{scope:"col",className:"px-6 py-3",children:"PublicKey"}),Object(l.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Amount"}),Object(l.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Status"})]})}),Object(l.jsx)("tbody",{children:t.map((e=>Object(l.jsxs)("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[Object(l.jsx)("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:e.pubkey}),Object(l.jsx)("td",{className:"px-6 py-4",children:e.amount}),Object(l.jsx)("td",{className:"px-6 py-4",children:e.status})]},e.pubkey)))})]})})})},g=n(2),m=n(5),x=n(16),f=n(210),w=n(125);async function y(e,t,n,a,r){let c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6?arguments[6]:void 0,i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:x.c,o=arguments.length>8&&void 0!==arguments[8]?arguments[8]:x.a;const l=await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x.c,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:x.a;if(!n&&!m.d.isOnCurve(t.toBuffer()))throw new Error("TokenOwnerOffCurveError");const[c]=await m.d.findProgramAddress([t.toBuffer(),a.toBuffer(),e.toBuffer()],r);return c}(n,a,c,i,o);let d;try{d=await Object(w.a)(e,l,s,i)}catch(u){if("TokenAccountNotFoundError"!==u.message&&"TokenInvalidAccountOwnerError"!==u.message)throw u;try{const c=(new m.g).add(Object(f.a)(t,l,a,n,i,o)),s=await e.getRecentBlockhash();c.feePayer=await t,c.recentBlockhash=await s.blockhash;const d=await r(c),u=await e.sendRawTransaction(d.serialize());await e.confirmTransaction(u)}catch(u){}d=await Object(w.a)(e,l,s,i)}if(!d.mint.equals(new m.d(n)))throw Error("TokenInvalidMintError");if(!d.owner.equals(new m.d(a)))throw new Error("TokenInvalidOwnerError");return d}const O={localhost:!1,usdcMintPubKey:new m.d("5CzMpU4F7pyQdLvFLTrweqD3sAyuvFSYAA7keq6PQPaH"),escrowProgramId:new m.d("JDvqLZ7ytrWUrPeDArR6E7XQe84VJExm6XvQHV5wst6N")};var v=n(128);var k=function(){const e=Object(j.d)(),[t]=Object(a.useState)(O.usdcMintPubKey.toString()),{balance:n,tokenBalance:r}=(e=>{const[t,n]=Object(a.useState)(0),[r,c]=Object(a.useState)(0),{connection:s}=Object(j.c)(),{publicKey:i,signTransaction:o}=Object(j.d)(),l=Object(a.useCallback)((async()=>{try{if(!i||!o)throw new g.k;const t=await s.getBalance(i);n(t/m.c);const a=await y(s,i,new m.d(e),i,o);null!==a&&void 0!==a&&a.amount&&c(Number(null===a||void 0===a?void 0:a.amount.toString()))}catch(t){console.log(t)}}),[s,i,e,o]);return setInterval((()=>{console.log("refreshing..."),l()}),6e3),{balance:t,tokenBalance:r}})(t),[c,s]=Object(a.useState)(""),[o,u]=Object(a.useState)(""),[b,x]=Object(a.useState)("");return Object(a.useEffect)((()=>{localStorage.getItem("version")!==v.version&&("caches"in window&&(caches.keys().then((e=>{e.forEach((e=>{caches.delete(e)}))})),window.location.reload()),localStorage.clear(),localStorage.setItem("version",v.version))}),[]),Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)("header",{className:"App-header",children:[Object(l.jsx)("img",{src:i,className:"App-logo mx-auto",alt:"logo"}),Object(l.jsx)("h3",{className:"text-white text-center",children:"Oxescrow Escrow Systems"}),Object(l.jsx)("h3",{className:"text-white text-center",children:e.connected&&e.publicKey&&Object(l.jsxs)("div",{className:"text-[20px] mt-[20px]",children:[Object(l.jsxs)("p",{children:[" Sol Balance: ",n.toFixed(2)," "]}),Object(l.jsxs)("p",{children:[" Token Balance: ",r.toFixed(2)," "]})]})}),Object(l.jsxs)("div",{className:"justify-center flex mt-5",children:[Object(l.jsx)(d,{})," ",Object(l.jsx)("br",{})]}),Object(l.jsx)("div",{className:"h-10"}),Object(l.jsxs)("div",{className:"w-[80%] mx-auto mt-10",children:[o&&Object(l.jsx)("p",{className:"text-red-500 text-sm",children:o}),b&&Object(l.jsx)("p",{className:"text-green-500 text-sm",children:b}),c&&Object(l.jsxs)("h1",{className:"text-blue-500 text-sm",children:["Escrow Mint Account: ",c]})]}),Object(l.jsxs)("div",{className:"flex mx-auto my-20",children:[Object(l.jsx)("div",{className:"w-[40%]",children:Object(l.jsx)(p,{setDisplayPubKey:s,setErrMsg:u,setMsg:x})}),Object(l.jsx)("div",{className:"w-[40%]",children:Object(l.jsx)(h,{})})]})]})})},N=n(69);var S=function(e){let{children:t}=e;const n=g.e.Devnet;console.log(n);const a=r.a.useMemo((()=>Object(m.i)(n)),[n]),c=O.localhost?"http://127.0.0.1:8899":a,s=r.a.useMemo((()=>[Object(N.a)(),Object(N.b)(),Object(N.c)(),Object(N.d)()]),[]);return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(j.a,{endpoint:c,children:Object(l.jsx)(j.b,{wallets:s,children:t})})})};s.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(S,{children:Object(l.jsx)(k,{})})}),document.getElementById("root"))}},[[401,1,2]]]);
//# sourceMappingURL=main.2f8f8063.chunk.js.map